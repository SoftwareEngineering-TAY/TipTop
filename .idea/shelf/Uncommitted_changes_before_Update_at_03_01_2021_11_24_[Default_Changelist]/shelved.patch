Index: app/src/main/res/layout/activity_points_parent.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\"\r\n    android:padding=\"20dp\">\r\n\r\n    <TextView\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginTop=\"20dp\"\r\n        android:text=\"Here is a table of your children's points:\"\r\n        android:fontFamily=\"@font/coming_soon\"\r\n        android:textColor=\"@color/black\"\r\n        android:textSize=\"20dp\"/>\r\n\r\n\r\n    <TableLayout\r\n        android:id=\"@+id/pointsTable\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\"\r\n        android:layout_marginTop=\"20dp\">\r\n    </TableLayout>\r\n\r\n</LinearLayout>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/layout/activity_points_parent.xml	(revision 226815b3dd58a44243fcff7d0568027f84dfe2ee)
+++ app/src/main/res/layout/activity_points_parent.xml	(date 1609665421128)
@@ -20,6 +20,7 @@
         android:id="@+id/pointsTable"
         android:layout_width="match_parent"
         android:layout_height="match_parent"
+        android:stretchColumns="0,1"
         android:layout_marginTop="20dp">
     </TableLayout>
 
Index: app/src/main/java/com/example/tiptop/Points/PointsParentActivity.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tiptop.Points;\r\n\r\nimport android.os.Bundle;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\npublic class PointsParentActivity extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(@Nullable Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tiptop/Points/PointsParentActivity.java	(revision 226815b3dd58a44243fcff7d0568027f84dfe2ee)
+++ app/src/main/java/com/example/tiptop/Points/PointsParentActivity.java	(date 1609665421165)
@@ -1,14 +1,62 @@
 package com.example.tiptop.Points;
 
 import android.os.Bundle;
+import android.view.Gravity;
+import android.widget.EditText;
+import android.widget.LinearLayout;
+import android.widget.TableLayout;
+import android.widget.TableRow;
+import android.widget.TextView;
 
 import androidx.annotation.Nullable;
 import androidx.appcompat.app.AppCompatActivity;
 
+import com.example.tiptop.R;
+
+import java.util.ArrayList;
+import java.util.HashMap;
+
+import static com.example.tiptop.Database.Database.setHashMapPoints;
+
 public class PointsParentActivity extends AppCompatActivity {
 
+    private TableLayout pointsTable;
+
+    private ArrayList<String> childName;
+    private HashMap<String,Integer> points;
+
     @Override
     protected void onCreate(@Nullable Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);
+        setContentView(R.layout.activity_points_parent);
+
+        pointsTable = (TableLayout) findViewById(R.id.pointsTable);
+//        setHashMapPoints(points);
+
+        setChildName();
+    }
+
+    private void setChildName(){
+        String name = "Name";
+        String score = "Score";
+        TableRow tr = new TableRow(this);
+        tr.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
+
+        TextView nameText = new TextView(this);
+        nameText.setText(name);
+        nameText.setGravity(Gravity.CENTER_HORIZONTAL);
+
+        TextView scoreText = new TextView(this);
+        scoreText.setText(score);
+        scoreText.setGravity(Gravity.CENTER_HORIZONTAL);
+
+        tr.addView(nameText);
+        tr.addView(scoreText);
+        pointsTable.addView(tr);
+    }
+
+    private void setPointsTable() {
+        TableRow tr = new TableRow(this);
+        tr.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.FILL_PARENT, TableRow.LayoutParams.WRAP_CONTENT));
     }
 }
Index: app/src/main/res/values-night/themes.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources xmlns:tools=\"http://schemas.android.com/tools\">\r\n    <!-- Base application theme. -->\r\n    <style name=\"Theme.TipTop\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\r\n        <!-- Primary brand color. -->\r\n        <item name=\"colorPrimary\">@color/purple_200</item>\r\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\r\n        <item name=\"colorOnPrimary\">@color/black</item>\r\n        <!-- Secondary brand color. -->\r\n        <item name=\"colorSecondary\">@color/teal_200</item>\r\n        <item name=\"colorSecondaryVariant\">@color/teal_200</item>\r\n        <item name=\"colorOnSecondary\">@color/black</item>\r\n        <!-- Status bar color. -->\r\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\r\n        <!-- Customize your theme here. -->\r\n    </style>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values-night/themes.xml	(revision 226815b3dd58a44243fcff7d0568027f84dfe2ee)
+++ app/src/main/res/values-night/themes.xml	(date 1609665862824)
@@ -12,5 +12,6 @@
         <!-- Status bar color. -->
         <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
         <!-- Customize your theme here. -->
+        <item name="android:fontFamily">@font/coming_soon</item>
     </style>
 </resources>
\ No newline at end of file
Index: app/src/main/java/com/example/tiptop/Objects/Task.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tiptop.Objects;\r\n\r\nimport java.io.Serializable;\r\nimport com.google.firebase.storage.StorageReference;\r\n\r\npublic class Task implements Serializable {\r\n\r\n    //Default constructor\r\n    public Task() {\r\n    }\r\n\r\n    public enum STATUS {\r\n        NotAssociated,\r\n        Associated,\r\n        WaitingForApproval,\r\n        Confirmed\r\n    }\r\n\r\n    private String nameTask;\r\n    private Long bonusScore;\r\n    private String belongsToUID; //Here we enter the UID from the function firebase.auth().Currentuser.uid\r\n    private String startDate;\r\n    private String endDate;\r\n    private STATUS status;\r\n    private String comment;\r\n    private String description;\r\n    private StorageReference image;\r\n\r\n    //Getter\r\n    public String getNameTask() {\r\n        return nameTask;\r\n    }\r\n\r\n    public String getDescription() {\r\n        return description;\r\n    }\r\n\r\n    public Long getBonusScore() {\r\n        return bonusScore;\r\n    }\r\n\r\n    public String getBelongsToUID() {\r\n        return belongsToUID;\r\n    }\r\n\r\n    public String getStartDate() {\r\n        return startDate;\r\n    }\r\n\r\n    public String getEndDate() {\r\n        return endDate;\r\n    }\r\n\r\n    public STATUS getStatus() {\r\n        return status;\r\n    }\r\n\r\n    public String getComment() {\r\n        return comment;\r\n    }\r\n\r\n    public StorageReference getImage() {\r\n        return image;\r\n    }\r\n\r\n    //Setter\r\n    public void setNameTask(String nameTask) {\r\n        this.nameTask = nameTask;\r\n    }\r\n\r\n    public void setDescription(String description) {\r\n        this.description = description;\r\n    }\r\n\r\n    public void setBonusScore(Long bonusScore) {\r\n        this.bonusScore = bonusScore;\r\n    }\r\n\r\n    public void setBelongsToUID(String belongsToUID) {\r\n        this.belongsToUID = belongsToUID;\r\n    }\r\n\r\n    public void setStartDate(String startDate) {\r\n        this.startDate = startDate;\r\n    }\r\n\r\n    public void setEndDate(String endDate) {\r\n        this.endDate = endDate;\r\n    }\r\n\r\n    public void setStatus(STATUS status) {\r\n        this.status = status;\r\n    }\r\n\r\n    public void setComment(String comment) {\r\n        this.comment = comment;\r\n    }\r\n\r\n    public void setImage(StorageReference image) {\r\n        this.image = image;\r\n    }\r\n\r\n\r\n    //methods\r\n    @Override\r\n    public String toString() {\r\n        return \"Task{\"+\"Name: \"+nameTask+'\\'' +\r\n                \"Bonus Score: \"+bonusScore+'\\'' +\r\n                \"Start date and hour: \"+startDate+'\\'' +\r\n                \"End date and hour: \"+endDate+'\\'' +\r\n                \"Status\"+status+'\\'' +\r\n                \"Comment\"+comment+'\\''+\r\n                \"}\";\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tiptop/Objects/Task.java	(revision 226815b3dd58a44243fcff7d0568027f84dfe2ee)
+++ app/src/main/java/com/example/tiptop/Objects/Task.java	(date 1609659874369)
@@ -21,6 +21,7 @@
     private String belongsToUID; //Here we enter the UID from the function firebase.auth().Currentuser.uid
     private String startDate;
     private String endDate;
+    private String confirmedDate;
     private STATUS status;
     private String comment;
     private String description;
@@ -51,6 +52,10 @@
         return endDate;
     }
 
+    public String getConfirmedDate() {
+        return confirmedDate;
+    }
+
     public STATUS getStatus() {
         return status;
     }
@@ -88,6 +93,10 @@
         this.endDate = endDate;
     }
 
+    public void setConfirmedDate(String confirmedDate) {
+        this.confirmedDate = confirmedDate;
+    }
+
     public void setStatus(STATUS status) {
         this.status = status;
     }
@@ -104,12 +113,17 @@
     //methods
     @Override
     public String toString() {
-        return "Task{"+"Name: "+nameTask+'\'' +
-                "Bonus Score: "+bonusScore+'\'' +
-                "Start date and hour: "+startDate+'\'' +
-                "End date and hour: "+endDate+'\'' +
-                "Status"+status+'\'' +
-                "Comment"+comment+'\''+
-                "}";
+        return "Task{" +
+                "nameTask='" + nameTask + '\'' +
+                ", bonusScore=" + bonusScore +
+                ", belongsToUID='" + belongsToUID + '\'' +
+                ", startDate='" + startDate + '\'' +
+                ", endDate='" + endDate + '\'' +
+                ", confirmedDate='" + confirmedDate + '\'' +
+                ", status=" + status +
+                ", comment='" + comment + '\'' +
+                ", description='" + description + '\'' +
+                ", image=" + image +
+                '}';
     }
 }
Index: app/src/main/res/values/themes.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><resources xmlns:tools=\"http://schemas.android.com/tools\">\r\n    <!-- Base application theme. -->\r\n    <style name=\"Theme.TipTop\" parent=\"Theme.MaterialComponents.DayNight.DarkActionBar\">\r\n        <!-- Primary brand color. -->\r\n        <item name=\"colorPrimary\">@color/purple_500</item>\r\n        <item name=\"colorPrimaryVariant\">@color/purple_700</item>\r\n        <item name=\"colorOnPrimary\">@color/white</item>\r\n        <!-- Secondary brand color. -->\r\n        <item name=\"colorSecondary\">@color/teal_200</item>\r\n        <item name=\"colorSecondaryVariant\">@color/teal_700</item>\r\n        <item name=\"colorOnSecondary\">@color/black</item>\r\n        <!-- Status bar color. -->\r\n        <item name=\"android:statusBarColor\" tools:targetApi=\"l\">?attr/colorPrimaryVariant</item>\r\n        <!-- Customize your theme here. -->\r\n    </style>\r\n</resources>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/res/values/themes.xml	(revision 226815b3dd58a44243fcff7d0568027f84dfe2ee)
+++ app/src/main/res/values/themes.xml	(date 1609665862847)
@@ -12,5 +12,6 @@
         <!-- Status bar color. -->
         <item name="android:statusBarColor" tools:targetApi="l">?attr/colorPrimaryVariant</item>
         <!-- Customize your theme here. -->
+        <item name="android:fontFamily">@font/coming_soon</item>
     </style>
 </resources>
\ No newline at end of file
Index: app/src/main/java/com/example/tiptop/Database/Database.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.tiptop.Database;\r\n\r\nimport android.graphics.Bitmap;\r\nimport android.net.Uri;\r\nimport android.util.Log;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\n\r\nimport com.example.tiptop.Adapters.TaskToChildExtendListAdapter;\r\nimport com.example.tiptop.Objects.Task;\r\nimport com.example.tiptop.Objects.User;\r\nimport com.example.tiptop.PoolTasks.TaskInfoParentActivity;\r\nimport com.google.android.gms.tasks.OnCompleteListener;\r\nimport com.google.firebase.auth.AuthResult;\r\nimport com.google.firebase.auth.FirebaseAuth;\r\nimport com.google.firebase.auth.FirebaseUser;\r\nimport com.google.firebase.database.DataSnapshot;\r\nimport com.google.firebase.database.DatabaseError;\r\nimport com.google.firebase.database.DatabaseReference;\r\nimport com.google.firebase.database.FirebaseDatabase;\r\nimport com.google.firebase.database.ValueEventListener;\r\nimport com.google.firebase.storage.FirebaseStorage;\r\nimport com.google.firebase.storage.StorageReference;\r\nimport com.google.firebase.storage.UploadTask;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.util.ArrayList;\r\nimport java.util.HashMap;\r\n\r\npublic class Database {\r\n\r\n    private static FirebaseStorage storage = FirebaseStorage.getInstance();\r\n    private static FirebaseDatabase db = FirebaseDatabase.getInstance();\r\n    private static FirebaseAuth mAuth = FirebaseAuth.getInstance();\r\n    private static DatabaseReference reference = db.getReference();\r\n    private static String userID = mAuth.getCurrentUser().getUid();\r\n    private static String currFamilyId;\r\n    private static String permission;\r\n    private static String TitleSpinnerOfBelongChild;\r\n\r\n    public static final String USERS_ROOT = \"Users\", FAMILIES_ROOT = \"Families\", TASKS_ROOT = \"Tasks\", USERRFAMILIES_ROOT = \"UserFamilies\";\r\n\r\n    public static boolean setStatus(String taskID, String Status) {\r\n        try {\r\n            reference.child(\"Tasks\").child(currFamilyId).child(taskID).child(\"status\").setValue(Status);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setbelongsToUID(String taskID, String uid) {\r\n        try {\r\n            if (uid != null)\r\n                reference.child(\"Tasks\").child(currFamilyId).child(taskID).child(\"status\").setValue(uid);\r\n            else\r\n                reference.child(\"Tasks\").child(currFamilyId).child(taskID).child(\"belongsToUID\").removeValue();\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setFamilyName(String key, String familyName) {\r\n        try {\r\n            reference.child(\"Families\").child(key).child(\"Family name\").setValue(familyName);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setUserToFamily(String familyKey, String userName) {\r\n        try {\r\n            reference.child(\"Families\").child(familyKey).child(userID).setValue(userName);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setUserToUserFamily(String familyKey, String familyName) {\r\n        try {\r\n            reference.child(\"UserFamilies\").child(userID).child(familyKey).setValue(familyName);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setUser(User userToAdd) {\r\n        try {\r\n            reference.child(\"Users\").child(userID).setValue(userToAdd);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    public static boolean updateTaskListFromDB(ArrayList<Task> toUpdate, ArrayList<String> idToUpdate, String status, ArrayAdapter<Task> mTaskListAdapter) {\r\n        try {\r\n            reference.child(\"Tasks\").child(currFamilyId).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    toUpdate.clear();\r\n                    idToUpdate.clear();\r\n                    for (DataSnapshot Snapshot : snapshot.getChildren()) {\r\n                        if (permission.equals(\"Parent\") && Snapshot.child(\"status\").getValue().equals(status)) {\r\n                            Task toAdd = Snapshot.getValue(Task.class);\r\n                            toUpdate.add(toAdd);\r\n                            idToUpdate.add(Snapshot.getKey());\r\n                        } else if (permission.equals(\"Child\") && Snapshot.child(\"belongsToUID\").getValue() != null &&\r\n                                Snapshot.child(\"belongsToUID\").getValue().equals(userID) && Snapshot.child(\"status\").getValue().equals(status)) {\r\n                            Task toAdd = Snapshot.getValue(Task.class);\r\n                            toUpdate.add(toAdd);\r\n                            idToUpdate.add(Snapshot.getKey());\r\n                        }\r\n                    }\r\n                    mTaskListAdapter.notifyDataSetChanged();\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    public static boolean updateExpandableTaskListFromDB(ArrayList<String> ListChildForTask, HashMap<String, ArrayList<Task>> ListTaskGroups, HashMap<String, ArrayList<String>> ListTaskID, String status, TaskToChildExtendListAdapter childAdapter) {\r\n        try {\r\n            reference.child(\"Families\").child(currFamilyId).addValueEventListener(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    ListChildForTask.clear();\r\n                    for (DataSnapshot ds : snapshot.getChildren()) {\r\n                        String toAddChildren = (String) ds.getValue();\r\n                        reference.child(\"Users\").child(ds.getKey()).addValueEventListener(new ValueEventListener() {\r\n                            @Override\r\n                            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                if (snapshot.child(\"type\").getValue() != null && snapshot.child(\"type\").getValue().toString().equals(\"Child\")) {\r\n                                    ListChildForTask.add(toAddChildren);\r\n                                    ArrayList<Task> toAdd = new ArrayList<>();\r\n                                    ArrayList<String> toAddID = new ArrayList<>();\r\n                                    reference.child(\"Tasks\").child(currFamilyId).addValueEventListener(new ValueEventListener() {\r\n                                        @Override\r\n                                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                                            toAdd.clear();\r\n                                            toAddID.clear();\r\n                                            for (DataSnapshot ds1 : snapshot.getChildren()) {\r\n                                                if (ds1.child(\"belongsToUID\").getValue() != null && ds1.child(\"belongsToUID\").getValue().equals(ds.getKey()) && ds1.child(\"status\").getValue().equals(status)) {\r\n                                                    Task taskToAdd = ds1.getValue(Task.class);\r\n                                                    toAdd.add(taskToAdd);\r\n                                                    toAddID.add(ds1.getKey());\r\n                                                }\r\n                                            }\r\n                                            ListTaskGroups.put(toAddChildren, toAdd);\r\n                                            ListTaskID.put(toAddChildren, toAddID);\r\n                                            System.out.println(\"ListChildForTask1\" + ListChildForTask);\r\n                                            System.out.println(\"ListTaskGroups1\" + ListTaskGroups);\r\n                                            childAdapter.notifyDataSetChanged();\r\n                                        }\r\n\r\n                                        @Override\r\n                                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                                        }\r\n                                    });\r\n                                }\r\n                            }\r\n\r\n                            @Override\r\n                            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean initializationCurrFamilyIdAndPermission() {\r\n        try {\r\n            reference.child(\"Users\").child(userID).child(\"currFamilyId\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    currFamilyId = (String) snapshot.getValue();\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n            reference.child(\"Users\").child(userID).child(\"type\").addListenerForSingleValueEvent(new ValueEventListener() {\r\n                @Override\r\n                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                    permission = (String) snapshot.getValue();\r\n                }\r\n\r\n                @Override\r\n                public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                }\r\n            });\r\n//            reference.child(\"Users\").child(userID).addListenerForSingleValueEvent(new ValueEventListener() {\r\n//                @Override\r\n//                public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n//                    Log.v(\"onDataChange\", \"**************\");\r\n//                    for (DataSnapshot ds : snapshot.getChildren()) {\r\n//                        Log.v(\"onFor\", \"**************\");\r\n//                        if (ds.getKey().equals(\"currFamilyId\")) {\r\n//                            currFamilyId = (String) ds.getValue();\r\n//                        }\r\n//                        if (ds.getKey().equals(\"type\")) {\r\n//                            permission = (String) ds.getValue();\r\n//                            Log.v(\"permision: \", permission);\r\n//                        }\r\n//                    }\r\n//                }\r\n//\r\n//                @Override\r\n//                public void onCancelled(@NonNull DatabaseError error) {\r\n//\r\n//                }\r\n//            });\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n\r\n    public static boolean setCurrFamilyId(String CurrFamilyId) {\r\n        try {\r\n            currFamilyId = CurrFamilyId;\r\n            reference.child(\"Users\").child(userID).child(\"currFamilyId\").setValue(CurrFamilyId);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static String getCurrFamilyId() {\r\n        return currFamilyId;\r\n    }\r\n\r\n    public static String getPermission() {\r\n        return permission;\r\n    }\r\n\r\n    public static void createUserInFireBase(User user_to_add, String familyId, Uri uri, Bitmap bitmap) {\r\n        String key = reference.child(\"Families\").push().getKey();\r\n        user_to_add.setCurrFamilyId(key);\r\n        mAuth.createUserWithEmailAndPassword(user_to_add.getEmail(), user_to_add.getPassword()).addOnCompleteListener(new OnCompleteListener<AuthResult>() {\r\n            @Override\r\n            public void onComplete(@NonNull com.google.android.gms.tasks.Task<AuthResult> task) {\r\n                if (task.isSuccessful()) {\r\n\r\n                    FirebaseUser firebaseUser = mAuth.getCurrentUser();\r\n                    String uid = firebaseUser.getUid();\r\n\r\n                    setFamilyName(key, familyId);\r\n\r\n                    setUserToFamily(key, user_to_add.getName());\r\n\r\n                    setUserToUserFamily(key, familyId);\r\n\r\n                    setUser(user_to_add);\r\n\r\n                    uploadImage(key, uri, bitmap);\r\n                } else {\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void uploadImage(String family_key, Uri uri_image, Bitmap bitmap_image) {\r\n        String path = \"Families/\" + family_key;\r\n        FirebaseStorage storage = FirebaseStorage.getInstance();\r\n        StorageReference mStorageRef = storage.getReference(path);\r\n        if (uri_image != null) {\r\n            mStorageRef.putFile(uri_image).addOnCompleteListener(new OnCompleteListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onComplete(@NonNull com.google.android.gms.tasks.Task<UploadTask.TaskSnapshot> task) {\r\n                    if (task.isSuccessful()) {\r\n                    } else {\r\n                    }\r\n                }\r\n            });\r\n        } else if (bitmap_image != null) {\r\n            ByteArrayOutputStream to_stream = new ByteArrayOutputStream();\r\n            bitmap_image.compress(Bitmap.CompressFormat.JPEG, 100, to_stream);\r\n            byte bytes[] = to_stream.toByteArray();\r\n            mStorageRef.putBytes(bytes).addOnCompleteListener(new OnCompleteListener<UploadTask.TaskSnapshot>() {\r\n                @Override\r\n                public void onComplete(@NonNull com.google.android.gms.tasks.Task<UploadTask.TaskSnapshot> task) {\r\n                    if (task.isSuccessful()) {\r\n                    } else {\r\n\r\n                    }\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n\r\n    public static void updateListOfChildFromDB(ArrayList<String> allKeys, ArrayList<String> allKids, ArrayAdapter adapter) {\r\n        reference.child(\"Families\").child(currFamilyId).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                allKids.clear();\r\n                allKeys.clear();\r\n                allKids.add(\"Not Associated\");\r\n                for (DataSnapshot ds : snapshot.getChildren()) {\r\n                    String toAddChildren = (String) ds.getValue();\r\n                    String toAddKey = (String) ds.getKey();\r\n                    reference.child(\"Users\").child(toAddKey).addValueEventListener(new ValueEventListener() {\r\n                        @Override\r\n                        public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n\r\n                            if (snapshot.child(\"type\").getValue() != null && snapshot.child(\"type\").getValue().toString().equals(\"Child\")) {\r\n                                allKeys.add(toAddKey);\r\n                                allKids.add(toAddChildren);\r\n                            }\r\n                            adapter.notifyDataSetChanged();\r\n                        }\r\n\r\n                        @Override\r\n                        public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n                        }\r\n                    });\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void addTaskToDB(String key, Task toAddTask) {\r\n        reference.child(\"Tasks\").child(currFamilyId).child(key).setValue(toAddTask);\r\n    }\r\n\r\n    public static String getKeyForNewTask() {\r\n        return reference.child(\"Tasks\").child(currFamilyId).push().getKey();\r\n    }\r\n\r\n    public static boolean setTaskDesctiption(String taskID, String descriptionToUpdate) {\r\n        try {\r\n            reference.child(\"Tasks\").child(currFamilyId).child(taskID).child(\"description\").setValue(descriptionToUpdate);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setTaskName(String taskID, String nameToUpdate) {\r\n        try {\r\n            reference.child(\"Tasks\").child(currFamilyId).child(taskID).child(\"nameTask\").setValue(nameToUpdate);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static boolean setTaskBonus(String taskID, int bonusToUpdate) {\r\n        try {\r\n            reference.child(\"Tasks\").child(currFamilyId).child(taskID).child(\"bonusScore\").setValue(bonusToUpdate);\r\n        } catch (Exception e) {\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static String getAndSetTitleSpinnerOfBelongChild(String BelongsToUID) {\r\n        reference.child(\"Users\").child(BelongsToUID).child(\"name\").addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                TitleSpinnerOfBelongChild = snapshot.getValue().toString();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n        return TitleSpinnerOfBelongChild;\r\n    }\r\n\r\n    public static void updateListOfFamilyFromDB(ArrayList<String> allKeys, ArrayList<String> allFamilies, ArrayAdapter adapter) {\r\n        //Updating the spinner\r\n        reference.child(\"UserFamilies\").child(userID).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                allFamilies.clear();\r\n                allKeys.clear();\r\n                for (DataSnapshot ds : snapshot.getChildren()) {\r\n                    String toAddFamiliy = (String) ds.getValue();\r\n                    String toAddKey = ds.getKey();\r\n                    allFamilies.add(toAddFamiliy);\r\n                    allKeys.add(toAddKey);\r\n                }\r\n                int pos = allKeys.indexOf(currFamilyId);\r\n                if (pos > 0) {\r\n                    String Family = allFamilies.get(pos);\r\n                    allFamilies.remove(Family);\r\n                    allFamilies.add(0, Family);\r\n\r\n                    allKeys.remove(currFamilyId);\r\n                    allKeys.add(0, currFamilyId);\r\n                }\r\n                adapter.notifyDataSetChanged();\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void setScreenViewByUser(TextView name, TextView email) {\r\n        reference.child(\"Users\").child(userID).addListenerForSingleValueEvent(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                String key;\r\n                String value;\r\n\r\n                for (DataSnapshot ds : snapshot.getChildren()) {\r\n\r\n                    key = ds.getKey();\r\n                    value = (String) ds.getValue();\r\n\r\n                    if (key.equals(\"name\")) {\r\n                        name.setText(value);\r\n                    } else if (email != null && key.equals(\"email\")) {\r\n                        email.setText(value);\r\n                    }\r\n                }\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    public static void setNumOfPoints(TextView numOfPoints, ArrayList<Integer>sumOfPoints) {\r\n        reference.child(\"Tasks\").child(getCurrFamilyId()).addValueEventListener(new ValueEventListener() {\r\n            @Override\r\n            public void onDataChange(@NonNull DataSnapshot snapshot) {\r\n                for (DataSnapshot ds : snapshot.getChildren()) {\r\n\r\n                    if (ds.child(\"belongsToUID\").getValue().equals(userID) && ds.child(\"status\").getValue().equals(\"Confirmed\")) {\r\n                        sumOfPoints.set(0,sumOfPoints.get(0)+Integer.parseInt(ds.child(\"bonusScore\").getValue().toString()));\r\n                    }\r\n                }\r\n                numOfPoints.setText(String.valueOf(sumOfPoints.get(0)));\r\n            }\r\n\r\n            @Override\r\n            public void onCancelled(@NonNull DatabaseError error) {\r\n\r\n            }\r\n        });\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/tiptop/Database/Database.java	(revision 226815b3dd58a44243fcff7d0568027f84dfe2ee)
+++ app/src/main/java/com/example/tiptop/Database/Database.java	(date 1609504748186)
@@ -4,6 +4,8 @@
 import android.net.Uri;
 import android.util.Log;
 import android.widget.ArrayAdapter;
+import android.widget.TableLayout;
+import android.widget.TableRow;
 import android.widget.TextView;
 
 import androidx.annotation.NonNull;
@@ -11,6 +13,7 @@
 import com.example.tiptop.Adapters.TaskToChildExtendListAdapter;
 import com.example.tiptop.Objects.Task;
 import com.example.tiptop.Objects.User;
+import com.example.tiptop.Points.PointsParentActivity;
 import com.example.tiptop.PoolTasks.TaskInfoParentActivity;
 import com.google.android.gms.tasks.OnCompleteListener;
 import com.google.firebase.auth.AuthResult;
@@ -485,5 +488,35 @@
 
             }
         });
+    }
+
+    public static void setHashMapPoints(HashMap<String,Integer> points) {
+        reference.child("Tasks").child(getCurrFamilyId()).addValueEventListener(new ValueEventListener() {
+            @Override
+            public void onDataChange(@NonNull DataSnapshot snapshot) {
+                for (DataSnapshot ds : snapshot.getChildren()) {
+
+                    String key;
+                    int value;
+
+                    if(ds.child("status").getValue().equals("Confirmed")){
+                        key = ds.child("belongsToUID").getValue().toString();
+                        if(points.get(key) != null) {
+                            value = points.get(key) + Integer.parseInt(ds.child("bonusScore").getValue().toString());
+                        }
+                        else{
+                            value = Integer.parseInt(ds.child("bonusScore").getValue().toString());
+                        }
+                        points.put(key,value);
+                    }
+                }
+            }
+
+            @Override
+            public void onCancelled(@NonNull DatabaseError error) {
+
+            }
+        });
+
     }
 }
